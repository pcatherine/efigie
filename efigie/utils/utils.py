#!/usr/bin/python
#-*- coding: utf-8 -*-

import hashlib
import string
import random
from functools import reduce


def randomKey(size=5):
  chars = string.ascii_uppercase + string.digits
  return ''.join(random.choice(chars) for x in range(size))

def generateHashKey(salt, random_str_size=5):
  random_str = randomKey(random_str_size)
  text = random_str + salt
  return hashlib.sha224(text.encode('utf-8')).hexdigest()

def toBinary(message):
  return bin(reduce(lambda x, y : (x<<8)+y, (ord(c) for c in message), 1))[3:]

def toString(binary):
  return removeNotChar("".join([chr(int(binary[i*8:i*8+8],2)) for i in range(int(len(binary)/8))]))

def removeNotChar(message):
  for i in range(len(message), -1, -1):
    if ord("".join(list(message)[i-1:i])) > 30 and ord("".join(list(message)[i-1:i])) < 256:
      return "".join(list(message)[:i])


if __name__ == "__main__":
  import re

  message = '##1##teste com acento Ã© aqui'
  oi = re.match('^[#]{2}(\d+)[#]{2}', message).groups(0)[0]
  print(oi)
  # print('01100101011001100110100101100111011010010110010100100000001000000011001010110011001101001011001110110100101100101')
  # msg = '011001010110011001101001011001110110100101100101001000000010000000110010101100110011010010110011101101001011001011'
  # msg = '111111111111111111111111111111101110111110101110101000111100010001110101011110110001001011001011101101000100011010001110011010000001100101011001010100101101111010011011000000101001101111000000001000010000110101011011100110001110011000111101110110111100111101010100111010000001101010100001111101111011111111101111110010000011001111111000000011001110011111111111111111111111111111111111111111111111111111111111111111111100001111001010101011011000110101001110110101100010101110100011000000110100001100000101110011111101100100011111001100010111010110110011011111010011110100110100110000100111000100100001000101110100011010100001111111000100011001101000000001111110100110101110000001001111011001000111111000000000111100101011001110010101000010000110011000000010111110110001101111111000010001101010100001101101111100000000011101100000011110110101110000010000001011010101011100010011011011101101100111101111001010000001011111110100111011111011000111111011111101111111111101111111100111101010000000101010011001101110111101100100100000011101110100100001000111111111111111111111111111111111110000110111011010101001111010101001011001111010111110111110010110111000101111000111010100000011100100010011000000101111110001101101010010101110000110111010000100011000000110011001010000000100011111010011110110111111001000000011010111000110000110011110110000101111101111111111011111100011011001010101100001000000000011111111111111111111111111111111111111111111111111111111111111111111111101111010000101000111011010111010000111000100000101000110101100110110010111111001000101110110110001000011010000010010011001111001010010110011010011100101100011111100000100001101110100101100011011110111101101110010101110011001000000111011111010001111011000101010010001010101000010010001101011101001111011111010111010100100010111101000010010110110001111000111011010100110101011010011010010001001011111110000100001000111000111111101100000100011011011010010000000001111100000101101010100101011110100011010100100111110111111000111101111111111111111011111111110001110110000001100101101001000001110011100100001101111111000100000001110111111111111111111111111111111111111100011111110010000101101000101100100111101011110100010010111101110011010010110111110111111011000100010110110000101010111010110000001100110110001110010010110010011111110101011000010111000010111011010001011101010101111000000100001100111111001000011111011110001010101111101111010010100001010011001011111111000000100011111111111111111111111111111111111111111111111111111111111111111111111100101111101010110010000001100100101011001110101100001101111011011110100000100110111010111001010011000010111010111011101001100111101001001101101111000001000010001000011001001111101001010110001101111010111011101000100111010001000100000010010000000111111110110111010011110101111010000101110101011000111111110100110101101001101111100101110001110000001010001011101111011001000001110100011011111001000010001111110111110001100000110011000111100011111000001111011100101101110001101010011011001100111110011011000010111111011101011011001111111111111111111111111011110001101000000100111111111110000000111111111111111100000100001011010100111111111111111111111111111111111110001010000101010001010110001011011010001001100110101010000000111011101001011100011000000010011100001001110101111110001111011110000110000111110001110100111010011011100010100100111101111001101000001100111010100110001000011111011000000001000011110001111100001001101111110011110100001011011001001001111111111000010110011111111111111111111111111111111111111111111111111111111111111111111111110010100001100001001000110110111100111010001101101111100000100110010101100100111010001001010011101010001010100001010110110011001111000100100110010111100010001000111101101001001010111110011110001110101100111010111011101101100100001011000001101111101101010111100010001110010101100100110000001001011010001010101110111011100101011011000101100001011011101001011110110100010001110001101100101000100011011110010011011010110111011000100011010001110001100100110011010011000011101011111001010010101001000111010111110101100011000010100111001101111111111010011110011011111101101001100110100000100001100111100111111110000000000011101111000111111111111111111111111111111111111000000011000110010101011001100111100111100001101101101010101101010000100010111000110010001010000000100000101001111011111101010010101011001101001000100011010110000110011011100000011100100101101110010111110100111101010111010101111101010100011111111001011100011100001011001111010000001011110001101011000000001011001011111111111111111111111111111111111111111111111111111111111111111111111111101100100110100000001111111001111111100100010110010111000110001101100110110101010101101010001010001000111011000011100101110001010111100100011101001010110100000000011001101011110111110101110000001111001111110010110010100101100100111101110101101010111000000111110101100101001100011000101111000001101111000111101100001000011001011001010111011111111010110011010101110100110110111110011100111011110001000000011111000101001111110011100001001011001000001000010010100101100000111110110111111000001101001010100011001110110101101100000111001011101111111110011000000110001110111001001000001100000100110000110000110010001100101111100000111111111111111111111111111111111111101000000011010011010000010101100111111111000101111001000110011000101110111111111111011100101010001100111010100001011010111011010010110001010111110001011111101000100101001011010110010010110001110001110101101010111001111011101111001000000010011001100101000111010110011111001110011101100100001001110010010011010110111111111111111111111111111111111111111111111111111111111111111111111111111000010000000001111110001000001001100001110101101000100111010100011001100100101011101110001110101100000011110011011000011010100000000111000111000111101000100001111100101010010001000000001111011000001010001010111011110111110000101000101100010011101101101001001010101011110000001110010100110010000011001011001011101011100001110011110011100000101100110110101100100010111100011110001101100010101111111111001110000010111110011010000000000000001010110001010100010000110001010101110011101111101000101011110000100000100100111010011011011101000101101100111111110100101110110101101110111011010000111110110101000111000101101111100010011111111111111111111111111111111111111101100100001100000100010010000001100111111100101000100010001011110010110101110100011100001000100110010001110111111100101111110011111111110111110100111110011100000101011110010101111011010011110110110011110000101100011000000000001111000001100100101001111001011101011101100110000011010100101001101100011011111100100011111111111111111111111111111111111111111111111111111111111111111111111101001110100001000000000011000000110000000001011111111001000000001101000000101011001101010101110100001000110010011000000010010000110111011010001011110100110111001000110011100011001110101111010000011100100001001001010010011100101011100100110001010110010110001100011000000110101101101010010100111111100110110001001101100000010000010101101010101101111001001101001011011100100111011100100100101010001111010111011111010011001101101010110111001100011101001011001011111100001111000000011110001000010110101111101010010101010101100011000101011111100011010001010000000101010010000011111100001100011111100101111111111101101100010011000000111111111111111111111111111111111110111100111100101110110101111111101110010000110100001011011101001010000001110001010110111010001000111100001100010001010111110011101001011100100111111111011001011010000011001000001000100010011101111111001000011011000000000001110100100100010100111000111101010110101011010001001110101001000100100000000100111101011110111111111111111111111111111111111111111111111111111111111111111111111111111111110100110101011010100000000000110000110000011001110000000000000000'
  # msg = '111111111111111111111111111111101110111110101110101000111100010001110101011110110001001011001011101101000100011010001110011010000001100101011001010100101101111010011011000000101001101111000000001000010000110101011011100110001110011000111101110110111100111101010100111010000001101010100001111101111011111111101111110010000011001111111000000011001110011111111111111111111111111111111111111111111111111111111111111111111100001111001010101011011000110101001110110101100010101110100011000000110100001100000101110011111101100100011111001100010111010110110011011111010011110100110100110000100111000100100001000101110100011010100001111111000100011001101000000001111110100110101110000001001111011001000111111000000000111100101011001110010101000010000110011000000010111110110001101111111000010001101010100001101101111100000000011101100000011110110101110000010000001011010101011100010011011011101101100111101111001010000001011111110100111011111011000111111011111101111111111101111111100111101010000000101010011001101110111101100100100000011101110100100001000111111111111111111111111111111111110000110111011010101001111010101001011001111010111110111110010110111000101111000111010100000011100100010011000000101111110001101101010010101110000110111010000100011000000110011001010000000100011111010011110110111111001000000011010111000110000110011110110000101111101111111111011111100011011001010101100001000000000011111111111111111111111111111111111111111111111111111111111111111111111101111010000101000111011010111010000111000100000101000110101100110110010111111001000101110110110001000011010000010010011001111001010010110011010011100101100011111100000100001101110100101100011011110111101101110010101110011001000000111011111010001111011000101010010001010101000010010001101011101001111011111010111010100100010111101000010010110110001111000111011010100110101011010011010010001001011111110000100001000111000111111101100000100011011011010010000000001111100000101101010100101011110100011010100100111110111111000111101111111111111111011111111110001110110000001100101101001000001110011100100001101111111000100000001110111111111111111111111111111111111111100011111110010000101101000101100100111101011110100010010111101110011010010110111110111111011000100010110110000101010111010110000001100110110001110010010110010011111110101011000010111000010111011010001011101010101111000000100001100111111001000011111011110001010101111101111010010100001010011001011111111000000100011111111111111111111111111111111111111111111111111111111111111111111111100101111101010110010000001100100101011001110101100001101111011011110100000100110111010111001010011000010111010111011101001100111101001001101101111000001000010001000011001001111101001010110001101111010111011101000100111010001000100000010010000000111111110110111010011110101111010000101110101011000111111110100110101101001101111100101110001110000001010001011101111011001000001110100011011111001000010001111110111110001100000110011000111100011111000001111011100101101110001101010011011001100111110011011000010111111011101011011001111111111111111111111111011110001101000000100111111111110000000111111111111111100000100001011010100111111111111111111111111111111111110001010000101010001010110001011011010001001100110101010000000111011101001011100011000000010011100001001110101111110001111011110000110000111110001110100111010011011100010100100111101111001101000001100111010100110001000011111011000000001000011110001111100001001101111110011110100001011011001001001111111111000010110011111111111111111111111111111111111111111111111111111111111111111111111110010100001100001001000110110111100111010001101101111100000100110010101100100111010001001010011101010001010100001010110110011001111000100100110010111100010001000111101101001001010111110011110001110101100111010111011101101100100001011000001101111101101010111100010001110010101100100110000001001011010001010101110111011100101011011000101100001011011101001011110110100010001110001101100101000100011011110010011011010110111011000100011010001110001100100110011010011000011101011111001010010101001000111010111110101100011000010100111001101111111111010011110011011111101101001100110100000100001100111100111111110000000000011101111000111111111111111111111111111111111111000000011000110010101011001100111100111100001101101101010101101010000100010111000110010001010000000100000101001111011111101010010101011001101001000100011010110000110011011100000011100100101101110010111110100111101010111010101111101010100011111111001011100011100001011001111010000001011110001101011000000001011001011111111111111111111111111111111111111111111111111111111111111111111111111101100100110100000001111111001111111100100010110010111000110001101100110110101010101101010001010001000111011000011100101110001010111100100011101001010110100000000011001101011110111110101110000001111001111110010110010100101100100111101110101101010111000000111110101100101001100011000101111000001101111000111101100001000011001011001010111011111111010110011010101110100110110111110011100111011110001000000011111000101001111110011100001001011001000001000010010100101100000111110110111111000001101001010100011001110110101101100000111001011101111111110011000000110001110111001001000001100000100110000110000110010001100101111100000111111111111111111111111111111111111101000000011010011010000010101100111111111000101111001000110011000101110111111111111011100101010001100111010100001011010111011010010110001010111110001011111101000100101001011010110010010110001110001110101101010111001111011101111001000000010011001100101000111010110011111001110011101100100001001110010010011010110111111111111111111111111111111111111111111111111111111111111111111111111111000010000000001111110001000001001100001110101101000100111010100011001100100101011101110001110101100000011110011011000011010100000000111000111000111101000100001111100101010010001000000001111011000001010001010111011110111110000101000101100010011101101101001001010101011110000001110010100110010000011001011001011101011100001110011110011100000101100110110101100100010111100011110001101100010101111111111001110000010111110011010000000000000001010110001010100010000110001010101110011101111101000101011110000100000100100111010011011011101000101101100111111110100101110110101101110111011010000111110110101000111000101101111100010011111111111111111111111111111111111111101100100001100000100010010000001100111111100101000100010001011110010110101110100011100001000100110010001110111111100101111110011111111110111110100111110011100000101011110010101111011010011110110110011110000101100011000000000001111000001100100101001111001011101011101100110000011010100101001101100011011111100100011111111111111111111111111111111111111111111111111111111111111111111111101001110100001000000000011000000110000000001011111111001000000001101000000101011001101010101110100001000110010011000000010010000110111011010001011110100110111001000110011100011001110101111010000011100100001001001010010011100101011100100110001010110010110001100011000000110101101101010010100111111100110110001001101100000010000010101101010101101111001001101001011011100100111011100100100101010001111010111011111010011001101101010110111001100011101001011001011111100001111000000011110001000010110101111101010010101010101100011000101011111100011010001010000000101010010000011111100001100011111100101111111111101101100010011000000111111111111111111111111111111111110111100111100101110110101111111101110010000110100001011011101001010000001110001010110111010001000111100001100010001010111110011101001011100100111111111011001011010000011001000001000100010011101111111001000011011000000000001110100100100010100111000111101010110101011010001001110101001000100100000000100111101011110111111111111111111111111111111111111111111111111111111111111111111111111111111110100110101011010100000000000110000110000011001110000000000000000'
  # print("".join(list(msg)[:-16]))
  # print(toString("".join(list(msg)[:-16])))
  # print(toString("".join(list(msg)[0:48])) # == IDENTIFICADOR and utils.toString("".join(msg[-48:])) == IDENTIFICADOR]
